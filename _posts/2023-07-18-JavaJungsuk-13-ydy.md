---
layout: post
title: "[13챕터] 쓰레드 구현 모델"
subtitle: 자바의 정석 스터디 20회차
categories: Java
tags: [Java, Thread, 자바의정석]
---
  
![threadModel](/assets/images/posts/javajungsuk/threadModel.png)

## 쓰레드 구현 모델
쓰레드 구현 모델은 4가지이다.
1. One-to-One
2. Many-to-One
3. Many-to-Many
4. Two-level

### One-to-One 모델
사용자 쓰레드 1 : 커널 쓰레드 1  
커널 수준 쓰레드, OS 레벨 쓰레드라고도 한다.  
OS(커널)이 쓰레드 생성 및 스케쥴링 등을 관리한다.  
Linux, Windows OS가 커널 수준 쓰레드를 구현한다.  

**장점**  
커널이 각각 독립적으로 스케쥴링하므로, 커널이 특정 쓰레드를 중단시키더라도 다른 쓰레드는 중단되지 않는다.    
Many-to-One 모델보다 병렬성이 높다.  

**단점**  
사용자 쓰레드 만큼의 커널 쓰레드가 필요하다.  
쓰레드 전환 시마다 context switching이 발생하므로 비교적 overhead가 높다.  


### Many-to-One 모델
사용자 쓰레드 N : 커널 쓰레드 1  
사용자 레벨 쓰레드라고도 한다.  
사용자 레벨 라이브러리를 통해 쓰레드 생성 및 스케쥴링 등을 관리한다.      
**장점**  
사용자 레벨에서 관리하기 때문에 context switching이 발생하지 않아 비교적 overhead가 적다.      
커널이 개입되지 않기 때문에 이식성이 높다.  
**단점**  
여러 개의 사용자 쓰레드 중 하나의 쓰레드가 중단되면, 해당 프로세스의 나머지 모든 쓰레드가 중단된다. 여러 개의 사용자 쓰레드들이 사용자 라이브러리에 의해 관리되므로 커널은 이 쓰레드들을 인지하지 못하기 때문에, 해당 쓰레드가 속한 프로세스 자체를 대기상태로 전환시키기 때문이다.       
커널에 의해 인식되지 않는 쓰레드이므로 다중 쓰레딩 환경이더라도 하나의 쓰레드만 커널에 접근이 가능하기 때문에 멀티코어 환경에서 병렬로 실행될 수 없다.  


### Many-to-Many 모델
사용자 쓰레드 N : 커널 쓰레드 M (N >= M)  
**장점**  
One-to-One 모델보다 비용이 적다.  
특정 쓰레드가 중단되더라도, 커널이 다른 쓰레드의 수행을 스케쥴링 할 수 있다.    
**단점**    
구현이 어렵다.    


### Two-level 모델
Many-to-Many 모델과 One-to-One 모델을 합친 모델  
중요한 작업은 One-to-One 모델로, 나머지 작업은 Many-to-May 모델로 처리함으로써 중요한 작업일 경우 대기시간을 단축시킨다.  


### 그럼 JAVA가 채택한 쓰레드 구현 모델은?  
현재 Java에서 사용하는 쓰레드 구현 모델은 네이티브 쓰레드이다.
초기에는 Green Thread(Many-to-One)를 사용했으나, 대부분의 컴퓨터 시스템에서 멀티코어가 표준이 되면서 해당 이점을 활용할 수 없는 Green Thread는 사용률이 감소하였다. 


---
출처   
https://youtu.be/YlnvCIZQDkw
